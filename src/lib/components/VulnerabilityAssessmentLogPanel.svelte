<script lang="ts">
	import type { VulnerabilityAssessmentLog } from '$lib/stores';
	import type { Building } from '@prisma/client';
	import { AddVulnerabilityAssessmentLogModal } from '.';

	export let building: Building;
	export let log: VulnerabilityAssessmentLog;
</script>

<AddVulnerabilityAssessmentLogModal {building} preview={log} let:modal>
	<button class="panel-button" on:click={modal.open}>
		<div class="content">
			<div class="title">
				<span class="condition">{log.inspectionData.overallPresentCondition}</span>
				<span class="date">{log.inspectionDate.toDateString()}</span>
			</div>
			<div class="inspector">{log.inspectorName} ({log.inspectorAffiliation})</div>
		</div>
		<svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
			<path d="M4 12H20M20 12L12 4M20 12L12 20" stroke="currentColor" stroke-linecap="square"/>
		</svg>
	</button>
</AddVulnerabilityAssessmentLogModal>

<style>
	.panel-button {
		position: relative;
		display: flex;
		align-items: center;
		justify-content: space-between;
		padding: 1rem 2rem;
		width: 100%;
		text-align: left;
		background: none;
		color: white;
		border: none;
		cursor: pointer;
	}

	.panel-button:hover,
	.panel-button:focus {
		background: rgb(255 255 255 / 5%);
	}

	.panel-button + :global(.panel-button::before) {
		content: "";
		position: absolute;
		top: 0;
		left: 2rem;
		right: 2rem;
		height: 1px;
		background: rgb(255 255 255 / 5%);
	}

	.icon {
		width: 2rem;
		height: 2rem;
		color: rgb(255 255 255 / 50%);
	}

	.title {
		display: flex;
		flex-wrap: wrap;
		align-items: center;
		gap: 1rem;
		margin: 0 0 0.5rem;
	}

	.condition {
		font-size: 1.2rem;
		font-weight: 700;
	}

	.date {
		font-size: 1rem;
		font-weight: 700;
		color: rgb(255 255 255 / 50%);
	}

	.inspector {
		font-size: 1rem;
		font-weight: 500;
		color: rgb(255 255 255 / 50%);
	}
</style>
